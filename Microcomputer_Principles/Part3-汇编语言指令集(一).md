## 汇编语言指令集
<center><img src="/All_pic/download.png" width=70%></img></center>

---
## 3.1 指令概述
#### 1. 指令概述
1. 指令
    - 是CPU操作的基本单位, 通知CPU执行某种操作的"命令"
    - CPU的全部指令的集合是指令集
2. 指令的分类
    - 机器指令
        1. 二进制编码的序列
    - 符号指令
        1. 字符串形式的序列(包含操作码以及操作数助记符)
3. 80486符号指令与机器指令对照表

    | 操作 | 符号指令 | 机器指令 |
    | --- | --- | --- |
    | 1234H -> AX | MOV AX, 1234H | B8 34 12 |
    | AX + BX -> AX | ADD AX. BX | 03 C3 |
    | CX - DX -> CX | SUB CX, DX | 2B CA |
    | 返回调用程序 | RET | C3 |
4. 指令的组成

    | 标号: | 操作码助记符 | 空格 | 操作数助记符 | ; 注释 |
    | --- | --- | --- | --- | --- |
    - 标号: 又称符号地址, 代表该指令的逻辑地址
    - 操作码: 要执行的操作, 如: +, -, *, 逻辑与等
    - 操作数: 执行操作过程所要操作的数, 如加运算的两个加数
    - 注解: ';' 不执行
5. 指令的长度
    - 在存储器中占用的字节数, 80X86指令长度(机器指令)为1~16字节
6. 指令的地址
    - 多字节指令占用连续的内存单元, 存放指令的第一字节的内存单元地址, 为指令地址
7. 指令的存放
    - 首先存放操作码, 而后操作数. 多字节操作数连续存放, 顺序依据小端法规则(Little Endian), 即低字节存放在低地址单元, 高存相邻高...
    <center><img src="/All_pic/Screenshot 2024-11-05 at 16.26.59.png" width=50%></img></center>
---
## 3.2 标志寄存器
#### 1. 标志寄存器
1. 80486标志寄存器
    <center><img src="/All_pic/Screenshot 2024-11-05 at 18.43.22.png" width=90%></img></center>

    - 32位CPU标志寄存器为32位, 实际使用15位
    - 15位标志分为:状态标志和控制标志
        1. 状态标志记录当前指令执行后的状态信息
        2. 控制标志用来控制微处理操作
2. 六种状态标志
    - C标志 - 进位/借位标志
        1. 在最高位分别为D7、15、31时的字节加/减, 产生进位/借位时: C标志置1, 否则置0
    - A标志 - 辅助进位/借位标志
        1. 字节、字、双字节加/减, D3位产生进位/借位时: A标志置1, 否则置0
    - S标志 - 符号标志
        1. 字节运算后, 结果的最高位D7/15位为1, S标志置1, 否则置0
        2. 双字节运算后, 结果的最高位D31位为1, S标志置1, 否则0
    - Z标志 - 零标志
        1. 运算结果全0时, Z标志置1, 否则0
    - P标志 - 奇偶标志(偶标志)
        1. 运算结果的低8位中, '1'的个数为偶数个, P标志置1, 否则0
    - O标志 - 溢出标志
        1. 若加数与被加数最高位相同, 却与结果最高位相异, O标志置1, 否则0
3. CPU默认操作数是有符号补码数, 以此来设置溢出标志
4. 判断溢出:
    1. 有符号数运算, 判O标志, 为1, 有溢处
    2. 无符号数加/减, 判C标志, 为1, 有溢出
5. 例题
<center><img src="/All_pic/Screenshot 2024-11-05 at 19.00.34.png" width=50%></img></center>

---
## 3.3 寻址方式
#### 1. 寻址方式(一)
1. 操作数寻址方式
   - 操作数指令的操作对象, 寻址方式就是在指令中, 用特定的助记符(地址表达式), 告知CPU如何计算操作数的地址, 从而取出操作数进行后继的指令操作
   - 寻址方式: 告知CPU本条指令的操作数在哪? 
2. 操作数的分类
    - 立即数: 操作数包含在指令中
    - 寄存器操作数: 放在CPU的某个寄存器中
    - 存储器操作数(内存操作数): 放在存储器中
    - I/O端口操作数: 放在I/O端口中
3. 操作数对应的寻址方式
<center><img src="/All_pic/Screenshot 2024-11-05 at 19.39.02.png" width=50%></img></center>

4. 四种寻址方式
   - 立即寻址方式
       1. 其所提供的操作数直接放在指令中, 紧跟在操作码的后面, 一起放在代码段区域中, 立即数可以是8、16、32位
    <center><img src="/All_pic/Screenshot 2024-11-05 at 19.42.49.png" width=50%></img></center>

   - 寄存器寻址
       1. 操作数放在CPU某个寄存器中, 符号指令中直接写出了寄存器名称
    <center><img src="/All_pic/Screenshot 2024-11-05 at 19.44.15.png" width=50%></img></center>

    - 存储器操作数寻址
        1. 直接寻址:
            - (1)段寄存器: [偏移地址]
                1. 如: MOV AL, ES: [2CH]
                <center><img src="/All_pic/Screenshot 2024-11-05 at 20.29.45.png" width=50%></img></center>

            - (2)段寄存器: 变量名
                1. 用变量名代表存储单元的有效地址, 经汇编后, 变量名有段基址和偏移量两种属性, 且变量名不可重复
                2. 如: 设数据段XX字节单元的内容为11H, 
                    - MOV AL, DS: XX ;取数据段XX字节单元内容 -> AL
                    - MOV AL, XX ;同上
        2. 寄存器间接寻址
            - 又称间接寻址, 间址. 该单元的段基址在段寄存器, 偏移地址在间址寄存器中
            - (1)间接寻址的地址表达式: 段寄存器: [间址寄存器]
            - (2)访问约定逻辑段, 可化简表达式为: [间址寄存器]
            <center><img src="/All_pic/Screenshot 2024-11-05 at 20.37.18.png" width=50%></img></center>

            - 间址寄存器与约定访问的逻辑段
            <center><img src="/All_pic/Screenshot 2024-11-05 at 20.38.41.png" width=50%></img></center>

        <!-- 3. 例题: 设数据段BUF字节单元的内容为55H, 取出该数 -> AL
            - 解法一: BX间址
            - 解法二: BP间址
            - 解法三: 变量名直接寻址 -->
        3. 基址寻址
            - 偏移地址由两部分组成. 一部分在基址寄存器中, 另一部分为常量
            - (1)表达式: 物理地址 = 段寄存器内容 * 16 + 基址寄存器 + 位移量
            - (2)表达式: 访问约定逻辑段, 简化后: [基址寄存器 + 位移量]
            <center><img src="/All_pic/Screenshot 2024-11-05 at 20.53.27.png" width=50%></img></center>
            <center><img src="/All_pic/Screenshot 2024-11-05 at 20.54.21.png" width=50%></img></center>
            <center><img src="/All_pic/Screenshot 2024-11-05 at 20.55.52.png" width=50%></img></center>

        4. 变址寻址
            - (1)有比例因子的表达式: 段寄存器: [比例因子 * 变址寄存器 + 位移量] 
            物理地址 = 段寄存器 * 16 + 比例因子 * 变址寄存器 + 位移量
            - (2)没有比例因子的表达式: 段寄存器: [变址寄存器 + 位移量]
            访问约定的逻辑段可简化为: [变址寄存器 + 位移量]
            物理地址 = 约定的段寄存器 * 16 + 变址寄存器 + 位移量
            <center><img src="/All_pic/Screenshot 2024-11-05 at 21.00.30.png" width=50%></img></center>
            <center><img src="/All_pic/Screenshot 2024-11-05 at 21.01.13.png" width=50%></img></center>
        
        5. 基址 + 变址寻址
            <center><img src="/All_pic/Screenshot 2024-11-05 at 21.03.22.png" width=50%></img></center>
            <center><img src="/All_pic/Screenshot 2024-11-05 at 21.03.49.png" width=50%></img></center>
            <center><img src="/All_pic/Screenshot 2024-11-05 at 21.08.12.png" width=50%></img></center>

    - I/O端口寻址:
        1. Pass

    
            
